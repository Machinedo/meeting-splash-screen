class Particle{constructor(){this.pos=p5.Vector.random2D().mult(250),this.vel=createVector(0,0),this.acc=this.pos.copy().mult(random(1e-4,1e-5)),this.w=random(3,5),this.color=[random(100,255),random(200,255),random(100,255)]}update(e){this.vel.add(this.acc),this.pos.add(this.vel),e&&(this.pos.add(this.vel),this.pos.add(this.vel),this.pos.add(this.vel))}edges(){return this.pos.x<-width/2||this.pos.x>width/2||this.pos.y<-height/2||this.pos.y>height/2}show(){noStroke(),fill(this.color),ellipse(this.pos.x,this.pos.y,this.w)}}const fetchImage=async(e,t)=>{try{var n=await fetch(e,t);if(n.ok)return(await n.json())[0]?.urls?.regular;throw new Error("Network response was not ok")}catch(e){console.error("Error:",e)}},countDownClock=(e=5,n,o,s,t,i)=>{if(n){n=document;const a=n.querySelector(".minutes"),l=n.querySelector(".seconds"),r=n.getElementById("heading-text"),c=n.querySelector(".countdown-container"),d=n.querySelector(".timer-end");{n=e;const h=Date.now()+60*n*1e3;let t=setInterval(()=>{var e=Math.round((h-Date.now())/1e3);e<=0?(clearInterval(t),c.classList.add("hide"),d.classList.remove("hide"),r.innerHTML=i,o?.stop(),s?.loop()):(a.textContent=Math.floor(e%86400%3600/60),l.textContent=e%60<10?"0"+e%60:e%60)},1e3)}}};function animateText(e){e&&((e=document.querySelector(".ml12")).innerHTML=e.textContent.replace(/\S/g,"<span class='letter'>$&</span>"),anime.timeline({loop:!0}).add({targets:".ml12 .letter",translateX:[40,0],translateZ:0,opacity:[0,1],easing:"easeOutExpo",duration:1200,delay:(e,t)=>500+30*t}).add({targets:".ml12 .letter",translateX:[0,-30],opacity:[1,0],easing:"easeInExpo",duration:1100,delay:(e,t)=>100+30*t}))}const IMG_URL="./assets/images/background/Forrest-Summer.jpg",TEXT_TO_SHOW="We'll be starting soon!",END_TEXT_TO_SHOW="We're starting now!",d=document,headerTextEle=d.getElementById("heading-text"),hamburgerEle=d.getElementsByClassName("hamburger")[0],navbarEle=d.getElementsByClassName("navbar")[0],logoInpEle=d.getElementById("logo-input"),logoContentEle=d.getElementsByClassName("logo")[0],textInpEle=d.getElementById("text-input"),timerInpEle=d.getElementById("timer-input"),timerCountEle=d.getElementById("timer-count"),timerInpHldrEle=d.getElementById("timer-input-hldr"),textContentEle=d.getElementById("text-content"),textContentHldrEle=d.getElementById("text-content-hldr"),textShownEle=d.getElementById("heading-text"),timerShownEle=d.getElementsByClassName("countdown-container")[0],hamburger=d.querySelector(".hamburger"),menu=d.querySelector(".navbar"),bod=d.querySelector(".container"),countdownContainer=d.querySelector(".countdown-container"),apiUrl="https://api.unsplash.com/photos/random?query=summer,forest&orientation=landscape&content_filter=high&count=1",requestOptions={method:"GET",headers:{Authorization:"Client-ID c00Hg1_R_NmgzORAwgRNsc4T5l2pAP7kiv0QXhBhjd0"}};let song,song2,fft,particles=[],img,timerAvl=!1,isTextShown=!0,isTimerShown=!0,isLinearWave=!1,isSplEffectsEnabled=!0,isSongStopped=!1,timeInMins=5;async function preload(){const t=createSelect();t.option("Select Music",""),t.option("cinematic-chillhop","./assets/music/cinematic-chillhop.mp3"),t.option("forest-lullaby","./assets/music/forest-lullaby.mp3"),t.option("in-the-forest-ambience","./assets/music/in-the-forest-ambience.mp3"),t.option("just-relax","./assets/music/just-relax.mp3"),t.option("lofi-chill","./assets/music/lofi-chill.mp3"),t.option("onceagain","./assets/music/onceagain.mp3"),t.option("open-sky","./assets/music/open-sky.mp3"),t.option("rainbow-after-rain","./assets/music/rainbow-after-rain.mp3"),song2=loadSound("./assets/music/brands/ascension/timer-end.mp3"),t.changed(()=>{var e=t.value();song?song.setPath(e):song=loadSound(e),song.loop()}),t.id("music-select"),t.parent("music-select-hldr");img=loadImage(IMG_URL)}function setup(){createCanvas(windowWidth,windowHeight),angleMode(DEGREES),imageMode(CENTER),rectMode(CENTER),fft=new p5.FFT(.8,512),img.filter(BLUR,1),noLoop()}function draw(){background(0),translate(width/2,height/2),fft.analyze(),amp=fft.getEnergy(20,200),push(),image(img,0,0,width+100,height+100),pop();var e=map(amp,0,255,100,150),t=(fill(20,e),noStroke(),rect(0,0,width,height),stroke(255),strokeWeight(3),noFill(),fft.waveform());if(isLinearWave)for(var n=0;n<width;n++){var o=300*t[floor(map(n,0,width,0,t.length))]+height/8-170;point(n-1720,o)}else for(var s=-1;s<=1;s+=2){beginShape();for(n=0;n<=180;n+=.5){var i=floor(map(n,0,180,0,t.length-1)),i=map(t[i],-1,1,150,350),a=i*sin(n)*s,i=i*cos(n);vertex(a,i)}endShape()}if(isSplEffectsEnabled&&!isLinearWave){e=new Particle;particles.push(e);for(n=particles.length-1;0<=n;n--)particles[n].edges()?particles.splice(n,1):(particles[n].update(230<amp),particles[n].show())}}function mouseClicked(e){song&&e.target!==hamburgerEle&&e.target!==navbarEle&&(song.isPlaying()?(song.pause(),noLoop()):(isSongStopped||(song.play(),loop()),!timerAvl&&isTimerShown&&(countDownClock(timeInMins,isTimerShown,song,song2,isSongStopped,END_TEXT_TO_SHOW),countdownContainer.classList.remove("hide"),timerAvl=!0)))}headerTextEle.innerHTML=TEXT_TO_SHOW,animateText(isTextShown),hamburger.addEventListener("click",function(){hamburger.classList.toggle("isactive"),menu.classList.toggle("active")}),textInpEle.onchange=()=>{isTextShown=textInpEle.checked,textInpEle.checked?(textShownEle.classList.remove("hide"),textContentHldrEle.classList.remove("hide")):(textShownEle.classList.add("hide"),textContentHldrEle.classList.add("hide"))},logoInpEle.onchange=()=>{islogoShown=logoInpEle.checked,logoInpEle.checked?logoContentEle.classList.remove("hide"):logoContentEle.classList.add("hide")},timerInpEle.onchange=()=>{isTimerShown=timerInpEle.checked,timerInpEle.checked?(timerShownEle.classList.remove("hide"),timerInpHldrEle.classList.remove("hide")):(timerShownEle.classList.add("hide"),timerInpHldrEle.classList.add("hide"))},timerCountEle.onchange=()=>{timeInMins=parseInt(timerCountEle.value)||5},textContentEle.onchange=()=>{headerTextEle.innerHTML=textContentEle.value,animateText(isTextShown)};